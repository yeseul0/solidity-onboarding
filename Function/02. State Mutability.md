# State Mutability

---

## 1. `view function`

- 상태변수를 읽을 수 있지만, **상태를 변경할 순 없음**을 명시적으로 보장.
- 이 함수가 상태변수를 수정하는 작업을 포함하지 않도록 컴파일러가 검사하도록 한다.

```solidity
function viewFunction() public view returns (uint256)
```

## 2. `pure function`
- **상태변수를 읽지도 수정 하지도 않는 함수**
- 상태변수나 블록정보에 접근하지 않고, 컴파일 타임에 입력값만으로 결과를 낼 수 있어야한다.

```solidity
function pureFunction(uint256 a, uint256 b) public pure returns (uint256)
```
---

### `가스비 비교`
**외부호출 (External Call)**
---

블록체인 외부에서 사용자가 직접 `view` `pure` 함수를 호출 할 때  
→ 로컬 노드가 처리

외부에서 `view` 나 `pure` 함수를 호출하면, 상태를 변경하지 않기 때문에 트랜잭션을 생성할 필요 없이, 단순히 노드에 데이터를 요청하는 작업으로 처리된다. 이 경우, 로컬 노드 선에서 요청이 처리되고 블록체인에는 기록되지 않으므로 가스비가 발생하지 않는다. 



**내부호출 (Internal Call)**  
---
컨트랙트 내에서 함수가 다른 함수(또는 자기 자신)를 호출할 때  
→ EVM 실행

반면 내부에서 `view` 를 호출하면, 상태를 읽는 작업이 포함되므로 스토리지 접근 비용(SLOAD)과 연산비용이 발생한다. `pure` 함수는 상태를 읽지 않기 때문에 스토리지 접근 비용은 없지만, 함수 내에서 수행되는 연산에 따른 연산 비용은 여전히 발생한다.

### 요약

- **외부 호출**: `view`와 `pure` 함수 모두 로컬 노드에서 처리 → 가스비 없음.
- **내부 호출**:
    - `view`: **스토리지 접근 비용 + 연산 비용** 발생.
    - `pure`: **연산 비용만** 발생.

특정 상태를 확인만 하면 될 때는 `view` 를, 입력 값을 기반으로 단순 연산만 하면 될 때는 `pure` 로 함수를 정의해서 가스비를 절약하자!!